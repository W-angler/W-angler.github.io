<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source/">





    <link rel="dns-prefetch" href="https://imsun.github.io">



    <link rel="dns-prefetch" href="https://www.google-analytics.com">



    <link rel="dns-prefetch" href="https://lib.baomitu.com">





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            第三章——antlr小试牛刀 | 
        
        年轻人啊不要熬夜
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.jpg">
    <link rel="icon" href="/img/favicon.jpg">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content=",Antlr,Parser Generator">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//css/material.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//css/style.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//css/prettify.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//css/prettify/tomorrow-night-eighties.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <style>
        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 300;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: regular;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 500;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.svg#Roboto) format('svg')
        }
    </style>


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//css/material-icons.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","https://cdn.bootcss.com/jquery/2.2.0/jquery.min.js", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="年轻人啊不要熬夜">
    <meta name="msapplication-starturl" content="https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="年轻人啊不要熬夜">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.jpg">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    
        
            <link rel="alternate" type="application/atom+xml" href="/atom.xml">
        
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="第三章——antlr小试牛刀 | 年轻人啊不要熬夜">
    <meta property="og:image" content="/img/favicon.jpg">
    <meta property="og:description" content="">
    <meta property="og:article:tag" content="Antlr"> <meta property="og:article:tag" content="Parser Generator"> 

    
        <meta property="article:published_time" content="Tue Oct 18 2016 21:44:48 GMT+0800">
        <meta property="article:modified_time" content="Sun Apr 01 2018 19:08:35 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html",
    "headline": "第三章——antlr小试牛刀",
    "datePublished": "Tue Oct 18 2016 21:44:48 GMT+0800",
    "dateModified": "Sun Apr 01 2018 19:08:35 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "W-angler",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.jpg"
        },
        "description": "A monad is just a monoid in the category of endofunctors, what's the problem?"
    },
    "publisher": {
        "@type": "Organization",
        "name": "年轻人啊不要熬夜",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.jpg"
        }
    },
    "keywords": ",Antlr,Parser Generator",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
        <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-89109775-1', 'auto');ga('send', 'pageview');
</script>
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-1-antlr的工具、运行时，以及生成的代码"><span class="post-toc-number">1.</span> <span class="post-toc-text">3.1 antlr的工具、运行时，以及生成的代码</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#antlr的语法描述能力比正则式强大得多"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">antlr的语法描述能力比正则式强大得多</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-2-测试生成的语法分析器"><span class="post-toc-number">2.</span> <span class="post-toc-text">3.2 测试生成的语法分析器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-3-将生成的语法分析器集成进Java程序"><span class="post-toc-number">3.</span> <span class="post-toc-text">3.3 将生成的语法分析器集成进Java程序</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-4-构建一个语言应用"><span class="post-toc-number">4.</span> <span class="post-toc-text">3.4 构建一个语言应用</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                第三章——antlr小试牛刀
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.jpg" width="44px" height="44px" alt="Author Avatar">
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>W-angler</strong>
        <span>10月 18, 2016</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAACzklEQVR42u3aQXLDIAwF0Nz/0u0BOnG/JNw68LzKZGLgsVHQ5/V15PPCxsbGxsbGxsbGfiT7FT/R0G9++XOcd98kI/fWjI2Njb03e4LJYe9Gq77VWzM2Njb2Cex3BaBXPKplplr88jVjY2NjYyefqxuUlENsbGxs7LsL2DVvUop6m4KNjY2Nnbfm7zjGJKHFv/XSsLGxsR/P7rV+/vfzn+bb2NjY2A9ml68wFi/xXI+Ql67JjNjY2Nh7s9c29K8XV20YVdtYv8yOjY2NfQC7urg8DFjbuqrGz9jY2Nh7s3slZO2xoVe08jgBGxsbe2/29UDz8PX6971xeuvBxsbG3pWdT5Av93oT5y2qBIyNjY19DjsvGPmm5MeV6nXMZOXNeAAbGxt7C3ZOrcYAoyPEqkMRNjY29qbsauCaH1HySza96zj5RmNjY2OfwJ60hMrNnVbLKX93cb6NjY2N/SHsXrPmjgZTvpJ8XmxsbOwT2KsaN71WVL71k5AYGxsbe1f2qomTwpY3ofK3klKKjY2NvTc7H67aMMrbPZPIuXBwwsbGxt6Ufb2UagFLRqsee3oNpqhuY2NjY2/BnjT68xLYGycPFaIDEjY2Nvam7PzPfS92zcvhqkuZhV4aNjY29hbs3lIm8W1+mKmOVo4HsLGxsbdgV6/m5O2eSeSwNhjAxsbGPoHd+6Y88Q3NqUIIjY2NjX0Au3cpJyl4d1z6qUbC2NjY2Cez86KyKkK4I+7FxsbG3pVdffKSk5Sx5HgzeQsbGxv7BHavMFSb+JPN6n1upiLY2NjYH8vOi1beQsrj2167qhpUYGNjY5/A7oWseXhQnTcvsdHasLGxsbHj3+RhwyQYWNBUwsbGxj6YPWkw5eFB3jCK1oONjY19ADsPd6uhb7VcrY0WsLGxsU9gVxs3vaNIXvDyqKAQTmNjY2Nvyj7nwcbGxsbGxsbGxn7M8w33InIUxwopmgAAAABJRU5ErkJggg==">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Antlr/">Antlr</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Parser-Generator/">Parser Generator</a>
    </li></ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=第三章——antlr小试牛刀&url=https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html&pic=https://w-angler.com/img/favicon.jpg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=第三章——antlr小试牛刀&url=https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html&via=W-angler" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html&title=第三章——antlr小试牛刀" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=年轻人啊不要熬夜&title=第三章——antlr小试牛刀&summary=&pics=https://w-angler.com/img/favicon.jpg&url=https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
        <a class="post_share-link" href="https://telegram.me/share/url?url=https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/index.html&text=第三章——antlr小试牛刀" target="_blank">
            <li class="mdl-menu__item">
                分享到 Telegram
            </li>
        </a>
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>　　接下来开始我们的第一个入门项目。</p>
<p>　　我们会构建<code>C</code>或者它的派生语言如<code>Java</code>的一个语法子集。详细点说，就是识别像<code>{1,2,3}</code>或者<code>{1,{2,3},4}</code>这样的由大括号包围（或嵌套）的整数。这个结构可能是整数数组，也有可能是结构体的初始化。这个语法在很多情况下都是很有用的，例如，我们可以用它来构建一个用来将<code>int数组</code>转换为<code>字节数组</code>（如果数组的所有初始值大小都在一个字节内的话）的C语言源码重构工具。我们也可以用这个语法来将Java的<code>short数组</code>转换为字符串，例如，我们可以将下面的代码：</p>
<pre><code>static short[] data = {1,2,3};
</code></pre><p>　　转化为：</p>
<pre><code>static String data = &quot;\u0001\u0002\u0003&quot;; // Java的字符是无符号的short
</code></pre><p>　　<code>Unicode</code>使用四个十六进制位来表示16位（short的长度）的字符值，例如<code>\u0001</code>。</p>
<p>　　我们之所以要做这个转换，是因为，在Java的<code>.class</code>文件中，存在一些限制。在Java的<code>.class</code>文件中，数组的初始化是像<code>data[0]=1;data[1]=2; data[2]=3;</code>这样的显式赋值初始化，而不是一个包含初始化数据的紧凑代码块。因为Java规范中限制了初始化方法的大小，所以数组的初始大小也被限制了。而不同的是，在Java<code>.class</code>文件中，字符串是以连续的<code>short</code>序列的形式存储的，所以，将数组转换为字符串可以生成更紧凑的<code>.class</code>文件，并且突破初始化方法的大小限制。</p>
<p>　　通过这个入门项目，你将会学习，antlr的<code>语法定义</code>语法，它将语法文件生成了哪些东西，如何将在Java程序中包含antlr生成的语法分析器代码，以及如何使用监听器来构建一个翻译器。</p>
<h2 id="3-1-antlr的工具、运行时，以及生成的代码"><a href="#3-1-antlr的工具、运行时，以及生成的代码" class="headerlink" title="3.1 antlr的工具、运行时，以及生成的代码"></a>3.1 antlr的工具、运行时，以及生成的代码</h2><p>　　开始之前，我们先来剖析一下antlr的jar包。在antlr中，有两个重要的组件：<code>antlr生成工具</code>和<code>运行时</code>。当我们“在一个语法上运行antlr”时，我们是在讨论<code>antlr生成工具</code>，<code>org.antlr.v4.Tool</code>类，它将会生成可以识别符合语法的句子的程序代码（词法分析器和语法分析器）。词法分析器将输入的字符流解析为token并且将它们传递给语法分析器来检查语法正确性。而<code>运行时</code>是生成的语法分析器、词法分析器、token在运行时所需要的类库和方法。我们先运行antlr生成工具来生成代码，然后编译它们，最后，在antlr的运行时中运行生成的代码。</p>
<p>　　在我们构建一个语言应用之前，我们必须先编写描述语法规则的语法文件。我们会在第五章详细学习如何来编写语法，但是在此之前，我还是先给出我们接下来所需要的语法描述：</p>
<p><code>ArrayInit.g4</code></p>
<pre><code>/*语法文件都由一个语法头开始，它指定了语法的名称，而且语法名称必须和文件名相同。
 * 在这个例子中，语法名称是ArrayInit，文件名为ArrayInit.g4
 */
grammar ArrayInit;
/* init将匹配在大括号中，由英文逗号分割的值。*/
init : &#39;{&#39; value (&#39;,&#39; value)* &#39;}&#39; ; // 匹配至少一个值
/*值可以是整数，也可以是嵌套的数组*/
value : init | INT ;
//语法规则由小写字母开头，词法规则由大写字母开头
INT : [0-9]+ ; //定义整数
WS : [ \t\r\n]+ -&gt; skip ; // 忽略空白符
</code></pre><p>　　将<code>ArrayInit.g4</code>文件放在一个单独的文件夹下，例如<code>/tmp/array</code>。然后，运行antlr生成工具：</p>
<pre><code>$ cd /tmp/array 
$ antlr4 ArrayInit.g4 # 使用之前设置的别名运行antlr生成工具
</code></pre><p>　　随后，我们会发现，在此目录下，antlr为<code>ArrayInit.g4</code>这个语法生成了很多个文件：</p>
<p><img src="2016-10-18_458FD8E8F4603041BF512E69EE4F012B.png" alt=""></p>
<p>　　于此，我们对开发的流程有了一个大致了解。接下来让我们来了解一下这些生成的文件：</p>
<ul>
<li><code>ArrayInitParser.java</code> 这个文件包含了为了<code>ArrayInit</code>这个语法生成的语法分析器，它包含对应每一个语法规则的函数以及一些其他的支持代码。</li>
<li><code>ArrayInitLexer.java</code> antlr会自动从语法文件中分离出词法和语法。这个文件包含了<code>ArrayInit</code>的词法定义，<code>INT</code>、<code>WS</code>以及字面值如<code>{</code>、<code>,</code>和<code>}</code>。记住，词法分析器的作用是将输入解析为token。</li>
<li><code>ArrayInit.tokens</code> antlr会为我们定义的token类型赋予一个类型数，并且将它们存储在这个文件中。当我们需要将一个很复杂的语法分解为多个小语法时，为了同步所有的token类型，这个文件是很有必要的。</li>
<li><code>ArrayInitListener.java</code>、<code>ArrayInitBaseListener.java</code> 默认地，antlr会为输入构建一个语法分析树。通过遍历这个树，遍历器可以触发我们提供的监听器对象的回调方法。<code>ArrayInitListener</code>是这些回调方法的接口，而<code>ArrayInitBaseListener</code>是<code>ArrayInitListener</code>的空实现，通过继承这个类，我们可以只覆盖我们感兴趣的回调方法。antlr也可以通过添加<code>-visitor</code>命令行参数生成<code>Visitor</code>（见上一章）。</li>
</ul>
<p>　　我们会在后面使用监听器类来将short数组转换为字符串对象，但是，在此之前，我们要确认一下，这个生成的语法分析器是否可以识别一些简单的输入。</p>
<hr>
<blockquote>
<h3 id="antlr的语法描述能力比正则式强大得多"><a href="#antlr的语法描述能力比正则式强大得多" class="headerlink" title="antlr的语法描述能力比正则式强大得多"></a><strong>antlr的语法描述能力比正则式强大得多</strong></h3></blockquote>
<blockquote>
<p>熟悉正则式（维基百科：<a href="https://zh.wikipedia.org/zh/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">正则表达式</a>）的人可能会有疑问，用antlr来解决如此简单的识别问题，是不是有点大材小用了。但事实是，因为存在嵌套，我们并不能使用正则式来识别这个数组初始化的例子。正则式是无记忆的，因为它不能回想起它之前识别过的输入。因此，正则式不知道怎么识别左右两边的大括号。</p>
</blockquote>
<hr>
<h2 id="3-2-测试生成的语法分析器"><a href="#3-2-测试生成的语法分析器" class="headerlink" title="3.2 测试生成的语法分析器"></a>3.2 测试生成的语法分析器</h2><p>　　在开始测试之前，我们必须先编译这些生成的Java源代码。我们可以直接编译在<code>/tmp/array</code>下的所有文件：</p>
<pre><code>$ cd /tmp/array 
$ javac *.java #编译生成的语法分析器
</code></pre><p>　　如果你编译时出现了<code>ClassNotFoundException</code>错误，这就意味着你可能没有设置好Java的<code>CLASSPATH</code>环境变量。在<code>UNIX</code>系统中，你需要执行以下的命令（你也可以添加到shell的启动脚本中，例如<code>.bash_profile</code>）：</p>
<pre><code>$ export CLASSPATH=&quot;.:/usr/local/lib/antlr-4.0-complete.jar:$CLASSPATH&quot;
</code></pre><p>　　为了测试我们的语法，我们使用在之前的章节中设置的<code>TestRig</code>的别名<code>grun</code>。下面使用它来打印词法分析器识别出的token：</p>
<pre><code>$ grun ArrayInit init -tokens
{99, 3, 451}
EOF
[@0,0:0=&#39;{&#39;,&lt;1&gt;,1:0]
[@1,1:2=&#39;99&#39;,&lt;4&gt;,1:1]
[@2,3:3=&#39;,&#39;,&lt;2&gt;,1:3]
[@3,5:5=&#39;3&#39;,&lt;4&gt;,1:5]
[@4,6:6=&#39;,&#39;,&lt;2&gt;,1:6]
[@5,8:10=&#39;451&#39;,&lt;4&gt;,1:8]
[@6,11:11=&#39;}&#39;,&lt;3&gt;,1:11]
[@7,13:12=&#39;&lt;EOF&gt;&#39;,&lt;-1&gt;,2:0]
</code></pre><p>　　在输入<code>{99,3,451}</code>后，我们必须再输入EOF（unix:<code>ctrl+D</code>;windows:<code>ctrl+Z</code>）。默认地，antlr会在处理之前加载整个输入（通常来说，这个是效率最高的方法）。</p>
<p>　　输出的每一行代表一个token，它展示了这个token的所有信息。例如，<code>[@5,8:10=&#39;451&#39;,&lt;4&gt;,1:8]</code>表示：这个token的索引为<code>5</code>（起始为<code>0</code>），文本内容为<code>451</code>，是第<code>8</code>到<code>10</code>个字符（索引也由0开始），token类型是<code>4</code>（INT），在第一行（从<code>1</code>开始），第<code>8</code>列（从0开始，<code>tab</code>算做一个单独的字符）。可以看到，并没有空格和换行符的token，因为我们的语法中，<code>WS</code>声明将它们忽略（-&gt;skip）。</p>
<p>　　为了更详细地了解语法分析器是怎样识别的，我们可以在运行时加上<code>-tree</code>参数：</p>
<pre><code>$ grun ArrayInit init -tree
{99, 3, 451}
EOF
(init { (value 99) , (value 3) , (value 451) })
</code></pre><p>　　加上<code>-tree</code>参数将会以Lisp风格输出语法分析树。又或者，加上<code>-gui</code>参数，在一个对话框中可视化语法分析树。我们用一个嵌套的数组作为输入：</p>
<pre><code>$ grun ArrayInit init -gui
{1,{2,3},4}
EOF
</code></pre><p>　　下面就是弹出的语法分析树对话框：</p>
<p><img src="2016-10-18_815EDCD7646FED15569D147F9F3B3DA1.png" alt=""> </p>
<p>　　语法树可以说人话的话，它就是在说“这个输入是用大括号包围的包含三个值的数组初始化，第一个和第三个值是整数<code>1</code>和<code>4</code>，第二个值也是一个数组，它包含两个值，值为<code>2</code>和<code>3</code>”。</p>
<p>　　这些内部节点，例如<code>init</code>和<code>value</code>，通过名称来识别各种各样的输入，就像，在英语句子中识别动词和主语。antlr会基于我们语法文件中的语法规则自动为我们构建语法分析树，在这章的末尾，我们会利用antlr内置的遍历器触发像<code>enterInit()</code>和<code>enterValue()</code>这样的回调方法来构建一个翻译器。</p>
<p>　　现在，既然我们已经学会了如何用antlr来测试语法，那么我们就开始学习如何在Java程序中调用这个生成的语法分析器吧！</p>
<h2 id="3-3-将生成的语法分析器集成进Java程序"><a href="#3-3-将生成的语法分析器集成进Java程序" class="headerlink" title="3.3 将生成的语法分析器集成进Java程序"></a>3.3 将生成的语法分析器集成进Java程序</h2><p>　　有了先前的良好开始后，我们就可以将antlr生成的语法分析器集成进一个更大程序中了。在这节，我们将会学习一个在Java程序中使用<code>main方法</code>调用语法分析器并且打印像<code>TestRig</code>添加<code>-tree</code>参数的输出的简单程序。以下这个<code>Test.java</code>文件大致体现出了第二章第一节的那个数据流图：</p>
<p><code>Test.java</code></p>
<pre><code>//导入antlr的运行时库
import org.antlr.v4.runtime.*; 
import org.antlr.v4.runtime.tree.*;
public class Test {
    public static void main(String[] args) throws Exception { 
        //创建一个读取标准输入的CharStream
        ANTLRInputStream input = new ANTLRInputStream(System.in);
        //创建一个从指定的CharStream中读取数据的词法分析器
        ArrayInitLexer lexer = new ArrayInitLexer(input);
        //创建一个词法分析器产生的token缓冲
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        //创建一个从token缓冲中读取token的语法分析器
        ArrayInitParser parser = new ArrayInitParser(tokens);
        ParseTree tree = parser.init(); //开始分析规则init
        System.out.println(tree.toStringTree(parser)); // 打印Lisp风格的语法分析树
    }
}
</code></pre><p>　　这个程序使用了一系列像<code>CommonTokenStream</code>和<code>ParseTree</code>这样的antlr运行时中的类，我们会在第四章第一节详细学习它们。</p>
<p>　　接下来让我们编译并运行这个程序：</p>
<pre><code>$ javac ArrayInit*.java Test.java
$ java Test
{1,{2,3},4}
EOF
(init { (value 1) , (value (init { (value 2) , (value 3) })) , (value 4) })
</code></pre><p>　　antlr也可以自动地报告和恢复语法错误。例如，我们的输入如果少了最后一个大括号，它将会产生以下的输出：</p>
<pre><code>$ java Test
{1,2
EOF
line 2:0 missing &#39;}&#39; at &#39;&lt;EOF&gt;&#39;
(init { (value 1) , (value 2) &lt;missing &#39;}&#39;&gt;)
</code></pre><p>　　于此，我们已经学会了如何运行antlr生成工具，如何将生成的语法分析树集成到Java程序中。如果一个程序只可以用来检查语法的话，并没有什么大不了的，因此，下面让我们来完成这个将short数组转换为字符串的翻译器。</p>
<h2 id="3-4-构建一个语言应用"><a href="#3-4-构建一个语言应用" class="headerlink" title="3.4 构建一个语言应用"></a>3.4 构建一个语言应用</h2><p>　　下面继续先前的例子。我们的下一个目标不仅仅是识别，而且还要做一些翻译工作。例如，将Java的short数组<code>{99,3,451}</code>翻译成<code>\u0063\u0003\u01c3</code>这样的字符串，其中<code>63</code>是<code>99</code>的十六进制表示。</p>
<p>　　为了超越先前的识别功能，我们必须从语法分析树中提取一些信息。最简单的方法就是，利用antlr内置的语法树遍历器，在它进行深度优先遍历时，触发一系列的回调方法。正如之前看到的，antlr自动为我们生成了一个监听器。这些监听器就像是GUI组件中的回调（例如，一个按钮可以在它被按下时触发一些事件），或者是XML文件的SAX解析器。</p>
<p>　　而我们需要做的，只是小小的工作：继承<code>ArrayInitBaseListener</code>，实现其中的一些方法。最简单的实现就是，在进行树遍历时，每一个监听器方法打印出翻译出来的片段。</p>
<p>　　使用监听器的好处就是，我们不需要自己去进行树遍历。事实上，我们甚至都不需要知道antlr运行时正在遍历语法分析树、回调我们的监听器方法。我们仅仅需要知道的是，在进入和离开某个语法规则时，会触发监听器的方法。正如我们将在第七章看到的，这种方法大大减少了我们的学习量，我们需要面对的仍然是编程时的难题，而不是句子识别时的难题。</p>
<p>　　开始编写这个翻译程序之前，我们要知道，如何将输入的token转换为输出的字符串。对此，我们可以先对几个有代表性的例子进行手动翻译，以此来总结转换的过程。在这个例子中，翻译的过程是非常直接的：</p>
<p><img src="2016-10-18_A5C23739C285BA5B161E0019A7213D20.png" alt=""></p>
<p>　　通俗来说，这个翻译过程就像是“X 转换为 Y”的映射规则：</p>
<ol>
<li>将<code>{</code>翻译为<code>&quot;</code>；</li>
<li>将<code>}</code>翻译为<code>&quot;</code>；</li>
<li>将整数翻译为以<code>\u</code>为前缀的四位十六进制字符串。</li>
</ol>
<p>　　为了写出这个翻译器，我们需要编写一些在碰到对应的token时可以打印出翻译结果的方法。内置的树遍历器会在进入和退出某个语法规则时触发监听器事件。下面是我们的监听器实现：</p>
<p><code>ShortToUnicodeString.java</code></p>
<pre><code>/* 将像{1,2,3}这样的数组转换为&quot;\u0001\u0002\u0003&quot; */ 
public class ShortToUnicodeString extends ArrayInitBaseListener { 
    /* 将`{`翻译为`&quot;` */ 
    @Override 
    public void enterInit(ArrayInitParser.InitContext ctx) {
        System.out.print(&#39;&quot;&#39;); 
    }
    /* 将`}`翻译为`&quot;` */ 
    @Override 
    public void exitInit(ArrayInitParser.InitContext ctx) {
        System.out.print(&#39;&quot;&#39;); 
    }
    /* 将整数翻译为以`\\u`为前缀的四位十六进制字符串 */ 
    @Override 
    public void enterValue(ArrayInitParser.ValueContext ctx) { 
    // 假设没有嵌套
    int value = Integer.valueOf(ctx.INT().getText()); 
    System.out.printf(&quot;\\u%04x&quot;, value); 
    }
}
</code></pre><p>　　我们不需要覆盖每一个<code>enter/exit</code>方法，我们只需要我们关心的那些。其中，我们可能比较不熟悉的表达式是<code>ctx.INT()</code>，它代表向上下文对象请求已经匹配的整数<code>INT</code>的值。上下文对象记录了识别过程中发生的任何东西。</p>
<p>　　我们还需要做一件事，就是创建一个和前一节类似的主程序：</p>
<p><code>Translate.java</code></p>
<pre><code>//导入antlr的运行时库
import org.antlr.v4.runtime.*; 
import org.antlr.v4.runtime.tree.*;
public class Test {
    public static void main(String[] args) throws Exception { 
        //创建一个读取标准输入的CharStream
        ANTLRInputStream input = new ANTLRInputStream(System.in);
        //创建一个从指定的CharStream中读取数据的词法分析器
        ArrayInitLexer lexer = new ArrayInitLexer(input);
        //创建一个词法分析器产生的token缓冲
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        //创建一个从token缓冲中读取token的语法分析器
        ArrayInitParser parser = new ArrayInitParser(tokens);
        ParseTree tree = parser.init(); //开始分析规则init
        // 创建一个普通的遍历器来触发监听器事件
        ParseTreeWalker walker = new ParseTreeWalker();
        // 遍历语法分析树，在遍历的过程中，触发回调
        walker.walk(new ShortToUnicodeString(), tree);
        System.out.println(); // 翻译后打印一个换行
    }
}
</code></pre><p>　　这个程序和上一节唯一的区别是，它创建了一个树遍历器，并用它来遍历语法分析器返回的语法分析树。在它进行遍历时，它会触发在<code>ShortToUnicodeString</code>中的回调方法。</p>
<p>　　现在让我们来试一下这个翻译器：</p>
<pre><code>$ javac ArrayInit*.java Translate.java
$ java Translate
{99, 3, 451}
EOF
&quot;\u0063\u0003\u01c3&quot;
</code></pre><p>　　太棒了！</p>
<p>　　我们刚刚构建了第一个翻译器，甚至都没怎么动语法，我们需要做的，仅仅只是实现很少的几个方法来打印合适的翻译结果。而且，我们可以通过传入不同的监听器来产生完全不同的输出！监听器将语法和我们的语言应用很大程度上解耦了，使语法具有了更大的重用性。</p>
<p>　　在下一章，我们会继续以走马观花的形式对antlr的<code>语法声明</code>进行一个粗略的学习，并且掌握一些使antlr变得更加强大易用的技巧。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 gitcoment -->
<div id="gitment-comment">
    <!-- Gitment 评论框 -->
<div id="container"></div>
</div>
<style>
    #gitment-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    var gitment = new Gitment({
        id: 'https://w-angler.com/2016/10/18/第三章——antlr小试牛刀/', // 可选。默认为 location.href
        owner: 'W-angler',
        repo: 'w-angler.github.io',
        oauth: {
            client_id: 'a3a3061c655fee6007da',
            client_secret: 'bc80f0e67bf63ff206c2efee14d8c76eb7a53472',
        },
    })
    gitment.render('container')
</script>


                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2016/10/28/JVM类加载与一些使用技巧/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/10/16/第二章——antlr纲要/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.jpg" alt="W-angler's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        048117wangle@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:048117wangle@gmail.com" target="_blank" title="与我联系">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        与我联系
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/W-angler" target="_blank" title="github">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">code</i>
                        
                        github
                    </a>
                </li>
            
                <li>
                    <a href="/atom.xml" target="_blank" title="RSS">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">rss_feed</i>
                        
                        RSS
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">8</span></a>
            </li></ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Antlr/">Antlr<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/JVM/">JVM<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/PLT/">PLT<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/git/">git<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/奇技淫巧/">奇技淫巧<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/科研/">科研<span class="sidebar_archives-count">1</span></a>
            </li></ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/atom.xml" title="RSS">
                
                    <i class="material-icons sidebar-material-icons">rss_feed</i>
                
                RSS
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">bookmark</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时间轴
            </a>
        </li>
        
    
        <li>
            <a href="/gallery" title="相册">
                
                    <i class="material-icons sidebar-material-icons">collections</i>
                
                相册
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">link</i>
                
                友情链接
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">14</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/wangler0408" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    

    <!-- Google + -->
    
        <a href="https://plus.google.com/101029110222735975086" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/W-angler" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    
        <a href="https://cn.linkedin.com/in/%E9%B9%8F%E7%A8%8B-%E6%B1%AA-6332a5121" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-linkedin">
                <span class="visuallyhidden">LinkedIn</span>
            </button><!--
     --></a>
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year=""></span>&nbsp;年轻人啊不要熬夜
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//js/lazyload.min.js", true)</script>



    <script>lsloader.load("js_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//js/js.min.js", true)</script>



    <script>lsloader.load("np_js","https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    
        <script>lsloader.load("sm_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@1.5.6/source//js/smoothscroll.js", true)</script>
    







   <!-- Gitment -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","https://cdn.bootcss.com/prettify/r298/prettify.min.js", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 2016;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
